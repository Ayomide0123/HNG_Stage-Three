{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/oyeti/Documents/GitHub/HNG_Stage-Three/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/oyeti/Documents/GitHub/HNG_Stage-Three/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/oyeti/Documents/GitHub/HNG_Stage-Three/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useContext,useEffect,useState}from'react';import{initializeApp}from'firebase/app';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,signOut}from'firebase/auth';import firebaseConfig from'./config.js';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext();export var useAuth=function useAuth(){return useContext(AuthContext);};export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var app=initializeApp(firebaseConfig);var auth=getAuth(app);useEffect(function(){var unsubscribe=onAuthStateChanged(auth,function(user){setCurrentUser(user);setLoading(false);});return function(){unsubscribe();};},[auth]);var signInUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var errorMessage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return signInWithEmailAndPassword(auth,email,password);case 3:_context.next=11;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);// Handle Firebase authentication errors and return custom error messages\nerrorMessage='An error occurred during sign-in';if(_context.t0.code==='auth/user-not-found'){errorMessage='User not found. Please check your email.';}else if(_context.t0.code==='auth/wrong-password'){errorMessage='Incorrect password. Please try again.';}console.error('Error signing in:',_context.t0);// Return the custom error message\nthrow new Error(errorMessage);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,5]]);}));return function signInUser(_x,_x2){return _ref2.apply(this,arguments);};}();var signOutUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return signOut(auth);case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.error('Error signing out:',_context2.t0);case 8:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}));return function signOutUser(){return _ref3.apply(this,arguments);};}();var value={currentUser:currentUser,signIn:signInUser,signOut:signOutUser};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children});};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","initializeApp","getAuth","onAuthStateChanged","signInWithEmailAndPassword","signOut","firebaseConfig","jsx","_jsx","AuthContext","useAuth","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","currentUser","setCurrentUser","_useState3","_useState4","loading","setLoading","app","auth","unsubscribe","user","signInUser","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","password","errorMessage","wrap","_callee$","_context","prev","next","t0","code","console","error","Error","stop","_x","_x2","apply","arguments","signOutUser","_ref3","_callee2","_callee2$","_context2","value","signIn","Provider"],"sources":["C:/Users/oyeti/Documents/GitHub/HNG_Stage-Three/src/components/authContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut } from 'firebase/auth';\r\nimport firebaseConfig from './config.js';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  return useContext(AuthContext);\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const app = initializeApp(firebaseConfig);\r\n  const auth = getAuth(app);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      setCurrentUser(user);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [auth]);\r\n\r\n  const signInUser = async (email, password) => {\r\n    try {\r\n      await signInWithEmailAndPassword(auth, email, password);\r\n    } catch (error) {\r\n      // Handle Firebase authentication errors and return custom error messages\r\n      let errorMessage = 'An error occurred during sign-in';\r\n      if (error.code === 'auth/user-not-found') {\r\n        errorMessage = 'User not found. Please check your email.';\r\n      } else if (error.code === 'auth/wrong-password') {\r\n        errorMessage = 'Incorrect password. Please try again.';\r\n      }\r\n      console.error('Error signing in:', error);\r\n\r\n      // Return the custom error message\r\n      throw new Error(errorMessage);\r\n    }\r\n  };\r\n\r\n  const signOutUser = async () => {\r\n    try {\r\n      await signOut(auth);\r\n    } catch (error) {\r\n      console.error('Error signing out:', error);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    currentUser,\r\n    signIn: signInUser,\r\n    signOut: signOutUser,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{!loading && children}</AuthContext.Provider>;\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}